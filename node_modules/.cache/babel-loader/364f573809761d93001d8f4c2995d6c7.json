{"ast":null,"code":"import _defineProperty from\"/Users/remyboire/Documents/github/scrimba/learn react/Quizzical/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/remyboire/Documents/github/scrimba/learn react/Quizzical/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/remyboire/Documents/github/scrimba/learn react/Quizzical/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/remyboire/Documents/github/scrimba/learn react/Quizzical/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/remyboire/Documents/github/scrimba/learn react/Quizzical/node_modules/@babel/runtime/regenerator/index.js\";import React from'react';import'./App.css';import Question from'./components/Question';import Start from'./components/Start';import Options from'./components/Options';import Results from'./components/Results';import{nanoid}from'nanoid';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){// Get a unique token in order to do not have repeted questions\nvar _React$useState=React.useState(localStorage.getItem('token')),_React$useState2=_slicedToArray(_React$useState,2),token=_React$useState2[0],setToken=_React$useState2[1];function getToken(){return _getToken.apply(this,arguments);}function _getToken(){_getToken=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:fetch('https://opentdb.com/api_token.php?command=request').then(function(response){return response.json();}).then(function(data){setToken(data.token);return localStorage.setItem('token',token);}).catch(function(error){return console.log(error);});case 1:case\"end\":return _context.stop();}}},_callee);}));return _getToken.apply(this,arguments);}React.useEffect(function(){if(!token){getToken();}},[]);console.log(token);// Get stored options from local storage or set default values\nvar _React$useState3=React.useState(JSON.parse(localStorage.getItem('options'))),_React$useState4=_slicedToArray(_React$useState3,2),options=_React$useState4[0],setOptions=_React$useState4[1];React.useEffect(function(){if(!options){setOptions({visible:false,difficulty:'',category:'',amount:'5',type:''});}},[]);React.useEffect(function(){localStorage.setItem('options',JSON.stringify(options));},[options]);// Get questions\nvar _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),questions=_React$useState6[0],setQuestions=_React$useState6[1];React.useEffect(function(){getQuestions();},[options.difficulty,options.amount,options.category,options.type]);var _React$useState7=React.useState([]),_React$useState8=_slicedToArray(_React$useState7,2),selectedAnswers=_React$useState8[0],setSelectedAnswers=_React$useState8[1];var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),isChecked=_React$useState10[0],setIsChecked=_React$useState10[1];var _React$useState11=React.useState({}),_React$useState12=_slicedToArray(_React$useState11,2),score=_React$useState12[0],setScore=_React$useState12[1];var _React$useState13=React.useState(0),_React$useState14=_slicedToArray(_React$useState13,2),turn=_React$useState14[0],setTurn=_React$useState14[1];var _React$useState15=React.useState(true),_React$useState16=_slicedToArray(_React$useState15,2),startScreen=_React$useState16[0],setStartScreen=_React$useState16[1];var categories=[{name:'all',id:'all'},{name:'General Knowledge',id:9},{name:'Entertainment: Books',id:10},{name:'Entertainment: Film',id:11},{name:'Entertainment: Music',id:12},{name:'Entertainment: Musicals & Theatres',id:13},{name:'Entertainment: Television',id:14},{name:'Entertainment: Video Games',id:15},{name:'Entertainment: Board Games',id:16},{name:'Science & Nature',id:17},{name:'Science: Computers',id:18},{name:'Science: Mathematics',id:19},{name:'Mythology',id:20},{name:'Sports',id:21},{name:'Geography',id:22},{name:'History',id:23},{name:'Politics',id:24},{name:'Art',id:25},{name:'Celebrities',id:26},{name:'Animals',id:27},{name:'Vehicles',id:28},{name:'Entertainment: Comics',id:29},{name:'Science: Gadgets',id:30},{name:'Entertainment: Japanese Anime & Manga',id:31},{name:'Entertainment: Cartoon & Animations',id:32}];function getCategory(category){switch(category){case'9':return'General Knowledge';case'10':return'Entertainment: Books';case'11':return'Entertainment: Film';case'12':return'Entertainment: Music';case'13':return'Entertainment: Musicals & Theatres';case'14':return'Entertainment: Television';case'15':return'Entertainment: Video Games';case'16':return'Entertainment: Board Games';case'17':return'Science & Nature';case'18':return'Science: Computers';case'19':return'Science: Mathematics';case'20':return'Mythology';case'21':return'Sports';case'22':return'Geography';case'23':return'History';case'24':return'Politics';case'25':return'Art';case'26':return'Celebrities';case'27':return'Animals';case'28':return'Vehicles';case'29':return'Entertainment: Comics';case'30':return'Science: Gadgets';case'31':return'Entertainment: Japanese Anime & Manga';case'32':return'Entertainment: Cartoon & Animations';}}// console.log(score)\n// get data from api and return it\nfunction getQuestions(){// fetch from api\nvar amount=options.amount;var difficulty=options.difficulty;var type=options.type;var category=options.category==='all'?'':options.category;var url=\"https://opentdb.com/api.php?amount=\".concat(amount,\"&difficulty=\").concat(difficulty,\"&type=\").concat(type,\"&category=\").concat(category,\"&token=\").concat(token);console.log('fetch from',url);fetch(url).then(function(response){return response.json();}).then(function(data){var _ref,_ref2;(_ref=data.response_code===3)!==null&&_ref!==void 0?_ref:getToken();(_ref2=data.response_code===4)!==null&&_ref2!==void 0?_ref2:getToken();data.results.forEach(function(question){question.incorrect_answers.push(question.correct_answer);question.incorrect_answers=question.incorrect_answers.sort();});setQuestions(data.results);}).catch(function(error){return console.log(error);});}function handleOptionsChange(event){setOptions(function(prevOptions){return _objectSpread(_objectSpread({},prevOptions),{},_defineProperty({},event.target.name,event.target.value));});}function toggleOptions(){setOptions(function(prevOptions){return _objectSpread(_objectSpread({},prevOptions),{},{visible:!prevOptions.visible});});}function toggleStartScreen(){setStartScreen(function(prevStartScreen){return!prevStartScreen;});}function handleQuestionClick(questionId,answer){if(!isChecked){setSelectedAnswers(function(prevState){var newState=_objectSpread({},prevState);newState[questionId]=answer;return newState;});}}// compare answers with correct answer\nfunction checkAnswers(){if(Object.getOwnPropertyNames(selectedAnswers).length===questions.length){setIsChecked(true);var correctAnswers=questions.map(function(question){return question.correct_answer;});var count=0;Object.keys(selectedAnswers).map(function(key){if(selectedAnswers[key]===correctAnswers[key]){return count++;}});setScore(function(prevState){var newState=_objectSpread({},prevState);newState[turn]={turn:turn,correctsAnswers:count,questions:questions.length};return newState;});}}function restartGame(){setTurn(function(prevTurn){return prevTurn+1;});setIsChecked(false);setSelectedAnswers([]);getQuestions();}// map questions to question components\n// console.log(questions)\n// take all scores from score object and add them in a total score const\nvar totalScore=Object.values(score).reduce(function(acc,curr){return acc+curr.correctsAnswers;},0);var totalQuestions=Object.values(score).reduce(function(acc,curr){return acc+curr.questions;},0);var totalTurns=Object.keys(score).length;return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[startScreen&&/*#__PURE__*/_jsx(Start,{options:options,toggleOptions:toggleOptions,toggleStartScreen:toggleStartScreen,getCategory:getCategory}),options.visible&&/*#__PURE__*/_jsx(Options,{options:options,toggleOptions:toggleOptions,handleOptionsChange:handleOptionsChange,getCategory:getCategory,categories:categories}),!startScreen&&questions.map(function(question){return/*#__PURE__*/_jsx(Question,{className:options.visible?'hidden':'',id:questions.indexOf(question),question:question.question,category:question.category,correct_answer:question.correct_answer,incorrect_answers:question.incorrect_answers,answers:question.answers,handleQuestionClick:handleQuestionClick,selectedAnswer:selectedAnswers[questions.indexOf(question)],isChecked:isChecked},nanoid());}),!startScreen&&/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:options.visible?'check hidden':'check',onClick:isChecked?restartGame:checkAnswers,children:isChecked?'Restart':'Check answers'}),!startScreen&&/*#__PURE__*/_jsx(Results,{options:options,toggleOptions:toggleOptions,getCategory:getCategory,score:totalScore,totalQuestions:totalQuestions,totalTurns:totalTurns})]});}","map":{"version":3,"sources":["/Users/remyboire/Documents/github/scrimba/learn react/Quizzical/src/App.js"],"names":["React","Question","Start","Options","Results","nanoid","App","useState","localStorage","getItem","token","setToken","getToken","fetch","then","response","json","data","setItem","catch","error","console","log","useEffect","JSON","parse","options","setOptions","visible","difficulty","category","amount","type","stringify","questions","setQuestions","getQuestions","selectedAnswers","setSelectedAnswers","isChecked","setIsChecked","score","setScore","turn","setTurn","startScreen","setStartScreen","categories","name","id","getCategory","url","response_code","results","forEach","question","incorrect_answers","push","correct_answer","sort","handleOptionsChange","event","prevOptions","target","value","toggleOptions","toggleStartScreen","prevStartScreen","handleQuestionClick","questionId","answer","prevState","newState","checkAnswers","Object","getOwnPropertyNames","length","correctAnswers","map","count","keys","key","correctsAnswers","restartGame","prevTurn","totalScore","values","reduce","acc","curr","totalQuestions","totalTurns","indexOf","answers"],"mappings":"6uBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,WAAP,CACA,MAAOC,CAAAA,QAAP,KAAqB,uBAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,oBAAlB,CACA,MAAOC,CAAAA,OAAP,KAAoB,sBAApB,CACA,MAAOC,CAAAA,OAAP,KAAoB,sBAApB,CACA,OAASC,MAAT,KAAuB,QAAvB,C,wFAEA,cAAe,SAASC,CAAAA,GAAT,EAAe,CAC7B;AACA,oBAA0BN,KAAK,CAACO,QAAN,CAAeC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAf,CAA1B,oDAAOC,KAAP,qBAAcC,QAAd,qBAF6B,QAGdC,CAAAA,QAHc,kIAG7B,mIACCC,KAAK,CAAC,mDAAD,CAAL,CACEC,IADF,CACO,SAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACC,IAAT,EAAd,EADP,EAEEF,IAFF,CAEO,SAACG,IAAD,CAAU,CACfN,QAAQ,CAACM,IAAI,CAACP,KAAN,CAAR,CACA,MAAOF,CAAAA,YAAY,CAACU,OAAb,CAAqB,OAArB,CAA8BR,KAA9B,CAAP,CACA,CALF,EAMES,KANF,CAMQ,SAACC,KAAD,QAAWC,CAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAAX,EANR,EADD,sDAH6B,2CAY7BpB,KAAK,CAACuB,SAAN,CAAgB,UAAM,CACrB,GAAI,CAACb,KAAL,CAAY,CACXE,QAAQ,GACR,CACD,CAJD,CAIG,EAJH,EAKAS,OAAO,CAACC,GAAR,CAAYZ,KAAZ,EAEA;AACA,qBAA8BV,KAAK,CAACO,QAAN,CAAeiB,IAAI,CAACC,KAAL,CAAWjB,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,CAAf,CAA9B,qDAAOiB,OAAP,qBAAgBC,UAAhB,qBAEA3B,KAAK,CAACuB,SAAN,CAAgB,UAAM,CACrB,GAAI,CAACG,OAAL,CAAc,CACbC,UAAU,CAAC,CACVC,OAAO,CAAE,KADC,CAEVC,UAAU,CAAE,EAFF,CAGVC,QAAQ,CAAE,EAHA,CAIVC,MAAM,CAAE,GAJE,CAKVC,IAAI,CAAE,EALI,CAAD,CAAV,CAOA,CACD,CAVD,CAUG,EAVH,EAWAhC,KAAK,CAACuB,SAAN,CAAgB,UAAM,CACrBf,YAAY,CAACU,OAAb,CAAqB,SAArB,CAAgCM,IAAI,CAACS,SAAL,CAAeP,OAAf,CAAhC,EACA,CAFD,CAEG,CAACA,OAAD,CAFH,EAIA;AACA,qBAAkC1B,KAAK,CAACO,QAAN,CAAe,EAAf,CAAlC,qDAAO2B,SAAP,qBAAkBC,YAAlB,qBACAnC,KAAK,CAACuB,SAAN,CAAgB,UAAM,CACrBa,YAAY,GACZ,CAFD,CAEG,CAACV,OAAO,CAACG,UAAT,CAAqBH,OAAO,CAACK,MAA7B,CAAqCL,OAAO,CAACI,QAA7C,CAAuDJ,OAAO,CAACM,IAA/D,CAFH,EAIA,qBAA8ChC,KAAK,CAACO,QAAN,CAAe,EAAf,CAA9C,qDAAO8B,eAAP,qBAAwBC,kBAAxB,qBACA,qBAAkCtC,KAAK,CAACO,QAAN,CAAe,KAAf,CAAlC,sDAAOgC,SAAP,sBAAkBC,YAAlB,sBACA,sBAA0BxC,KAAK,CAACO,QAAN,CAAe,EAAf,CAA1B,uDAAOkC,KAAP,sBAAcC,QAAd,sBACA,sBAAwB1C,KAAK,CAACO,QAAN,CAAe,CAAf,CAAxB,uDAAOoC,IAAP,sBAAaC,OAAb,sBACA,sBAAsC5C,KAAK,CAACO,QAAN,CAAe,IAAf,CAAtC,uDAAOsC,WAAP,sBAAoBC,cAApB,sBAEA,GAAMC,CAAAA,UAAU,CAAG,CAClB,CAAEC,IAAI,CAAE,KAAR,CAAeC,EAAE,CAAE,KAAnB,CADkB,CAElB,CAAED,IAAI,CAAE,mBAAR,CAA6BC,EAAE,CAAE,CAAjC,CAFkB,CAGlB,CAAED,IAAI,CAAE,sBAAR,CAAgCC,EAAE,CAAE,EAApC,CAHkB,CAIlB,CAAED,IAAI,CAAE,qBAAR,CAA+BC,EAAE,CAAE,EAAnC,CAJkB,CAKlB,CAAED,IAAI,CAAE,sBAAR,CAAgCC,EAAE,CAAE,EAApC,CALkB,CAMlB,CAAED,IAAI,CAAE,oCAAR,CAA8CC,EAAE,CAAE,EAAlD,CANkB,CAOlB,CAAED,IAAI,CAAE,2BAAR,CAAqCC,EAAE,CAAE,EAAzC,CAPkB,CAQlB,CAAED,IAAI,CAAE,4BAAR,CAAsCC,EAAE,CAAE,EAA1C,CARkB,CASlB,CAAED,IAAI,CAAE,4BAAR,CAAsCC,EAAE,CAAE,EAA1C,CATkB,CAUlB,CAAED,IAAI,CAAE,kBAAR,CAA4BC,EAAE,CAAE,EAAhC,CAVkB,CAWlB,CAAED,IAAI,CAAE,oBAAR,CAA8BC,EAAE,CAAE,EAAlC,CAXkB,CAYlB,CAAED,IAAI,CAAE,sBAAR,CAAgCC,EAAE,CAAE,EAApC,CAZkB,CAalB,CAAED,IAAI,CAAE,WAAR,CAAqBC,EAAE,CAAE,EAAzB,CAbkB,CAclB,CAAED,IAAI,CAAE,QAAR,CAAkBC,EAAE,CAAE,EAAtB,CAdkB,CAelB,CAAED,IAAI,CAAE,WAAR,CAAqBC,EAAE,CAAE,EAAzB,CAfkB,CAgBlB,CAAED,IAAI,CAAE,SAAR,CAAmBC,EAAE,CAAE,EAAvB,CAhBkB,CAiBlB,CAAED,IAAI,CAAE,UAAR,CAAoBC,EAAE,CAAE,EAAxB,CAjBkB,CAkBlB,CAAED,IAAI,CAAE,KAAR,CAAeC,EAAE,CAAE,EAAnB,CAlBkB,CAmBlB,CAAED,IAAI,CAAE,aAAR,CAAuBC,EAAE,CAAE,EAA3B,CAnBkB,CAoBlB,CAAED,IAAI,CAAE,SAAR,CAAmBC,EAAE,CAAE,EAAvB,CApBkB,CAqBlB,CAAED,IAAI,CAAE,UAAR,CAAoBC,EAAE,CAAE,EAAxB,CArBkB,CAsBlB,CAAED,IAAI,CAAE,uBAAR,CAAiCC,EAAE,CAAE,EAArC,CAtBkB,CAuBlB,CAAED,IAAI,CAAE,kBAAR,CAA4BC,EAAE,CAAE,EAAhC,CAvBkB,CAwBlB,CAAED,IAAI,CAAE,uCAAR,CAAiDC,EAAE,CAAE,EAArD,CAxBkB,CAyBlB,CAAED,IAAI,CAAE,qCAAR,CAA+CC,EAAE,CAAE,EAAnD,CAzBkB,CAAnB,CA4BA,QAASC,CAAAA,WAAT,CAAqBpB,QAArB,CAA+B,CAC9B,OAAQA,QAAR,EACC,IAAK,GAAL,CACC,MAAO,mBAAP,CACD,IAAK,IAAL,CACC,MAAO,sBAAP,CACD,IAAK,IAAL,CACC,MAAO,qBAAP,CACD,IAAK,IAAL,CACC,MAAO,sBAAP,CACD,IAAK,IAAL,CACC,MAAO,oCAAP,CACD,IAAK,IAAL,CACC,MAAO,2BAAP,CACD,IAAK,IAAL,CACC,MAAO,4BAAP,CACD,IAAK,IAAL,CACC,MAAO,4BAAP,CACD,IAAK,IAAL,CACC,MAAO,kBAAP,CACD,IAAK,IAAL,CACC,MAAO,oBAAP,CACD,IAAK,IAAL,CACC,MAAO,sBAAP,CACD,IAAK,IAAL,CACC,MAAO,WAAP,CACD,IAAK,IAAL,CACC,MAAO,QAAP,CACD,IAAK,IAAL,CACC,MAAO,WAAP,CACD,IAAK,IAAL,CACC,MAAO,SAAP,CACD,IAAK,IAAL,CACC,MAAO,UAAP,CACD,IAAK,IAAL,CACC,MAAO,KAAP,CACD,IAAK,IAAL,CACC,MAAO,aAAP,CACD,IAAK,IAAL,CACC,MAAO,SAAP,CACD,IAAK,IAAL,CACC,MAAO,UAAP,CACD,IAAK,IAAL,CACC,MAAO,uBAAP,CACD,IAAK,IAAL,CACC,MAAO,kBAAP,CACD,IAAK,IAAL,CACC,MAAO,uCAAP,CACD,IAAK,IAAL,CACC,MAAO,qCAAP,CAhDF,CAkDA,CACD;AACA;AACA,QAASM,CAAAA,YAAT,EAAwB,CACvB;AACA,GAAML,CAAAA,MAAM,CAAGL,OAAO,CAACK,MAAvB,CACA,GAAMF,CAAAA,UAAU,CAAGH,OAAO,CAACG,UAA3B,CACA,GAAMG,CAAAA,IAAI,CAAGN,OAAO,CAACM,IAArB,CACA,GAAMF,CAAAA,QAAQ,CAAGJ,OAAO,CAACI,QAAR,GAAqB,KAArB,CAA6B,EAA7B,CAAkCJ,OAAO,CAACI,QAA3D,CACA,GAAMqB,CAAAA,GAAG,8CAAyCpB,MAAzC,wBAA8DF,UAA9D,kBAAiFG,IAAjF,sBAAkGF,QAAlG,mBAAoHpB,KAApH,CAAT,CACAW,OAAO,CAACC,GAAR,CAAY,YAAZ,CAA0B6B,GAA1B,EAEAtC,KAAK,CAACsC,GAAD,CAAL,CACErC,IADF,CACO,SAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACC,IAAT,EAAd,EADP,EAEEF,IAFF,CAEO,SAACG,IAAD,CAAU,gBACf,MAAAA,IAAI,CAACmC,aAAL,GAAuB,CAAvB,6BAA4BxC,QAAQ,EAApC,CACA,OAAAK,IAAI,CAACmC,aAAL,GAAuB,CAAvB,+BAA4BxC,QAAQ,EAApC,CACAK,IAAI,CAACoC,OAAL,CAAaC,OAAb,CAAqB,SAACC,QAAD,CAAc,CAClCA,QAAQ,CAACC,iBAAT,CAA2BC,IAA3B,CAAgCF,QAAQ,CAACG,cAAzC,EACAH,QAAQ,CAACC,iBAAT,CAA6BD,QAAQ,CAACC,iBAAT,CAA2BG,IAA3B,EAA7B,CACA,CAHD,EAIAxB,YAAY,CAAClB,IAAI,CAACoC,OAAN,CAAZ,CACA,CAVF,EAWElC,KAXF,CAWQ,SAACC,KAAD,QAAWC,CAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAAX,EAXR,EAYA,CAED,QAASwC,CAAAA,mBAAT,CAA6BC,KAA7B,CAAoC,CACnClC,UAAU,CAAC,SAACmC,WAAD,CAAiB,CAC3B,sCACIA,WADJ,wBAEED,KAAK,CAACE,MAAN,CAAaf,IAFf,CAEsBa,KAAK,CAACE,MAAN,CAAaC,KAFnC,GAIA,CALS,CAAV,CAMA,CACD,QAASC,CAAAA,aAAT,EAAyB,CACxBtC,UAAU,CAAC,SAACmC,WAAD,CAAiB,CAC3B,sCACIA,WADJ,MAEClC,OAAO,CAAE,CAACkC,WAAW,CAAClC,OAFvB,GAIA,CALS,CAAV,CAMA,CAED,QAASsC,CAAAA,iBAAT,EAA6B,CAC5BpB,cAAc,CAAC,SAACqB,eAAD,CAAqB,CACnC,MAAO,CAACA,eAAR,CACA,CAFa,CAAd,CAGA,CAED,QAASC,CAAAA,mBAAT,CAA6BC,UAA7B,CAAyCC,MAAzC,CAAiD,CAChD,GAAI,CAAC/B,SAAL,CAAgB,CACfD,kBAAkB,CAAC,SAACiC,SAAD,CAAe,CACjC,GAAMC,CAAAA,QAAQ,kBAAQD,SAAR,CAAd,CACAC,QAAQ,CAACH,UAAD,CAAR,CAAuBC,MAAvB,CACA,MAAOE,CAAAA,QAAP,CACA,CAJiB,CAAlB,CAKA,CACD,CAED;AACA,QAASC,CAAAA,YAAT,EAAwB,CACvB,GAAIC,MAAM,CAACC,mBAAP,CAA2BtC,eAA3B,EAA4CuC,MAA5C,GAAuD1C,SAAS,CAAC0C,MAArE,CAA6E,CAC5EpC,YAAY,CAAC,IAAD,CAAZ,CACA,GAAMqC,CAAAA,cAAc,CAAG3C,SAAS,CAAC4C,GAAV,CAAc,SAACvB,QAAD,QAAcA,CAAAA,QAAQ,CAACG,cAAvB,EAAd,CAAvB,CACA,GAAIqB,CAAAA,KAAK,CAAG,CAAZ,CACAL,MAAM,CAACM,IAAP,CAAY3C,eAAZ,EAA6ByC,GAA7B,CAAiC,SAACG,GAAD,CAAS,CACzC,GAAI5C,eAAe,CAAC4C,GAAD,CAAf,GAAyBJ,cAAc,CAACI,GAAD,CAA3C,CAAkD,CACjD,MAAOF,CAAAA,KAAK,EAAZ,CACA,CACD,CAJD,EAKArC,QAAQ,CAAC,SAAC6B,SAAD,CAAe,CACvB,GAAMC,CAAAA,QAAQ,kBAAQD,SAAR,CAAd,CACAC,QAAQ,CAAC7B,IAAD,CAAR,CAAiB,CAChBA,IAAI,CAAEA,IADU,CAEhBuC,eAAe,CAAEH,KAFD,CAGhB7C,SAAS,CAAEA,SAAS,CAAC0C,MAHL,CAAjB,CAKA,MAAOJ,CAAAA,QAAP,CACA,CARO,CAAR,CASA,CACD,CAED,QAASW,CAAAA,WAAT,EAAuB,CACtBvC,OAAO,CAAC,SAACwC,QAAD,QAAcA,CAAAA,QAAQ,CAAG,CAAzB,EAAD,CAAP,CACA5C,YAAY,CAAC,KAAD,CAAZ,CACAF,kBAAkB,CAAC,EAAD,CAAlB,CACAF,YAAY,GACZ,CAED;AACA;AAEA;AACA,GAAMiD,CAAAA,UAAU,CAAGX,MAAM,CAACY,MAAP,CAAc7C,KAAd,EAAqB8C,MAArB,CAA4B,SAACC,GAAD,CAAMC,IAAN,CAAe,CAC7D,MAAOD,CAAAA,GAAG,CAAGC,IAAI,CAACP,eAAlB,CACA,CAFkB,CAEhB,CAFgB,CAAnB,CAGA,GAAMQ,CAAAA,cAAc,CAAGhB,MAAM,CAACY,MAAP,CAAc7C,KAAd,EAAqB8C,MAArB,CAA4B,SAACC,GAAD,CAAMC,IAAN,CAAe,CACjE,MAAOD,CAAAA,GAAG,CAAGC,IAAI,CAACvD,SAAlB,CACA,CAFsB,CAEpB,CAFoB,CAAvB,CAGA,GAAMyD,CAAAA,UAAU,CAAGjB,MAAM,CAACM,IAAP,CAAYvC,KAAZ,EAAmBmC,MAAtC,CAEA,mBACC,aAAK,SAAS,CAAC,KAAf,WACE/B,WAAW,eAAI,KAAC,KAAD,EAAO,OAAO,CAAEnB,OAAhB,CAAyB,aAAa,CAAEuC,aAAxC,CAAuD,iBAAiB,CAAEC,iBAA1E,CAA6F,WAAW,CAAEhB,WAA1G,EADjB,CAEExB,OAAO,CAACE,OAAR,eACA,KAAC,OAAD,EAAS,OAAO,CAAEF,OAAlB,CAA2B,aAAa,CAAEuC,aAA1C,CAAyD,mBAAmB,CAAEL,mBAA9E,CAAmG,WAAW,CAAEV,WAAhH,CAA6H,UAAU,CAAEH,UAAzI,EAHF,CAKE,CAACF,WAAD,EACAX,SAAS,CAAC4C,GAAV,CAAc,SAACvB,QAAD,qBACb,KAAC,QAAD,EACC,SAAS,CAAE7B,OAAO,CAACE,OAAR,CAAkB,QAAlB,CAA6B,EADzC,CAGC,EAAE,CAAEM,SAAS,CAAC0D,OAAV,CAAkBrC,QAAlB,CAHL,CAIC,QAAQ,CAAEA,QAAQ,CAACA,QAJpB,CAKC,QAAQ,CAAEA,QAAQ,CAACzB,QALpB,CAMC,cAAc,CAAEyB,QAAQ,CAACG,cAN1B,CAOC,iBAAiB,CAAEH,QAAQ,CAACC,iBAP7B,CAQC,OAAO,CAAED,QAAQ,CAACsC,OARnB,CASC,mBAAmB,CAAEzB,mBATtB,CAUC,cAAc,CAAE/B,eAAe,CAACH,SAAS,CAAC0D,OAAV,CAAkBrC,QAAlB,CAAD,CAVhC,CAWC,SAAS,CAAEhB,SAXZ,EAEMlC,MAAM,EAFZ,CADa,EAAd,CANF,CAsBE,CAACwC,WAAD,eACA,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAEnB,OAAO,CAACE,OAAR,CAAkB,cAAlB,CAAmC,OAApE,CAA6E,OAAO,CAAEW,SAAS,CAAG4C,WAAH,CAAiBV,YAAhH,UACElC,SAAS,CAAG,SAAH,CAAe,eAD1B,EAvBF,CA+BE,CAACM,WAAD,eACA,KAAC,OAAD,EACC,OAAO,CAAEnB,OADV,CAEC,aAAa,CAAEuC,aAFhB,CAGC,WAAW,CAAEf,WAHd,CAIC,KAAK,CAAEmC,UAJR,CAKC,cAAc,CAAEK,cALjB,CAMC,UAAU,CAAEC,UANb,EAhCF,GADD,CA4CA","sourcesContent":["import React from 'react'\nimport './App.css'\nimport Question from './components/Question'\nimport Start from './components/Start'\nimport Options from './components/Options'\nimport Results from './components/Results'\nimport { nanoid } from 'nanoid'\n\nexport default function App() {\n\t// Get a unique token in order to do not have repeted questions\n\tconst [token, setToken] = React.useState(localStorage.getItem('token'))\n\tasync function getToken() {\n\t\tfetch('https://opentdb.com/api_token.php?command=request')\n\t\t\t.then((response) => response.json())\n\t\t\t.then((data) => {\n\t\t\t\tsetToken(data.token)\n\t\t\t\treturn localStorage.setItem('token', token)\n\t\t\t})\n\t\t\t.catch((error) => console.log(error))\n\t}\n\tReact.useEffect(() => {\n\t\tif (!token) {\n\t\t\tgetToken()\n\t\t}\n\t}, [])\n\tconsole.log(token)\n\n\t// Get stored options from local storage or set default values\n\tconst [options, setOptions] = React.useState(JSON.parse(localStorage.getItem('options')))\n\n\tReact.useEffect(() => {\n\t\tif (!options) {\n\t\t\tsetOptions({\n\t\t\t\tvisible: false,\n\t\t\t\tdifficulty: '',\n\t\t\t\tcategory: '',\n\t\t\t\tamount: '5',\n\t\t\t\ttype: '',\n\t\t\t})\n\t\t}\n\t}, [])\n\tReact.useEffect(() => {\n\t\tlocalStorage.setItem('options', JSON.stringify(options))\n\t}, [options])\n\n\t// Get questions\n\tconst [questions, setQuestions] = React.useState([])\n\tReact.useEffect(() => {\n\t\tgetQuestions()\n\t}, [options.difficulty, options.amount, options.category, options.type])\n\n\tconst [selectedAnswers, setSelectedAnswers] = React.useState([])\n\tconst [isChecked, setIsChecked] = React.useState(false)\n\tconst [score, setScore] = React.useState({})\n\tconst [turn, setTurn] = React.useState(0)\n\tconst [startScreen, setStartScreen] = React.useState(true)\n\n\tconst categories = [\n\t\t{ name: 'all', id: 'all' },\n\t\t{ name: 'General Knowledge', id: 9 },\n\t\t{ name: 'Entertainment: Books', id: 10 },\n\t\t{ name: 'Entertainment: Film', id: 11 },\n\t\t{ name: 'Entertainment: Music', id: 12 },\n\t\t{ name: 'Entertainment: Musicals & Theatres', id: 13 },\n\t\t{ name: 'Entertainment: Television', id: 14 },\n\t\t{ name: 'Entertainment: Video Games', id: 15 },\n\t\t{ name: 'Entertainment: Board Games', id: 16 },\n\t\t{ name: 'Science & Nature', id: 17 },\n\t\t{ name: 'Science: Computers', id: 18 },\n\t\t{ name: 'Science: Mathematics', id: 19 },\n\t\t{ name: 'Mythology', id: 20 },\n\t\t{ name: 'Sports', id: 21 },\n\t\t{ name: 'Geography', id: 22 },\n\t\t{ name: 'History', id: 23 },\n\t\t{ name: 'Politics', id: 24 },\n\t\t{ name: 'Art', id: 25 },\n\t\t{ name: 'Celebrities', id: 26 },\n\t\t{ name: 'Animals', id: 27 },\n\t\t{ name: 'Vehicles', id: 28 },\n\t\t{ name: 'Entertainment: Comics', id: 29 },\n\t\t{ name: 'Science: Gadgets', id: 30 },\n\t\t{ name: 'Entertainment: Japanese Anime & Manga', id: 31 },\n\t\t{ name: 'Entertainment: Cartoon & Animations', id: 32 },\n\t]\n\n\tfunction getCategory(category) {\n\t\tswitch (category) {\n\t\t\tcase '9':\n\t\t\t\treturn 'General Knowledge'\n\t\t\tcase '10':\n\t\t\t\treturn 'Entertainment: Books'\n\t\t\tcase '11':\n\t\t\t\treturn 'Entertainment: Film'\n\t\t\tcase '12':\n\t\t\t\treturn 'Entertainment: Music'\n\t\t\tcase '13':\n\t\t\t\treturn 'Entertainment: Musicals & Theatres'\n\t\t\tcase '14':\n\t\t\t\treturn 'Entertainment: Television'\n\t\t\tcase '15':\n\t\t\t\treturn 'Entertainment: Video Games'\n\t\t\tcase '16':\n\t\t\t\treturn 'Entertainment: Board Games'\n\t\t\tcase '17':\n\t\t\t\treturn 'Science & Nature'\n\t\t\tcase '18':\n\t\t\t\treturn 'Science: Computers'\n\t\t\tcase '19':\n\t\t\t\treturn 'Science: Mathematics'\n\t\t\tcase '20':\n\t\t\t\treturn 'Mythology'\n\t\t\tcase '21':\n\t\t\t\treturn 'Sports'\n\t\t\tcase '22':\n\t\t\t\treturn 'Geography'\n\t\t\tcase '23':\n\t\t\t\treturn 'History'\n\t\t\tcase '24':\n\t\t\t\treturn 'Politics'\n\t\t\tcase '25':\n\t\t\t\treturn 'Art'\n\t\t\tcase '26':\n\t\t\t\treturn 'Celebrities'\n\t\t\tcase '27':\n\t\t\t\treturn 'Animals'\n\t\t\tcase '28':\n\t\t\t\treturn 'Vehicles'\n\t\t\tcase '29':\n\t\t\t\treturn 'Entertainment: Comics'\n\t\t\tcase '30':\n\t\t\t\treturn 'Science: Gadgets'\n\t\t\tcase '31':\n\t\t\t\treturn 'Entertainment: Japanese Anime & Manga'\n\t\t\tcase '32':\n\t\t\t\treturn 'Entertainment: Cartoon & Animations'\n\t\t}\n\t}\n\t// console.log(score)\n\t// get data from api and return it\n\tfunction getQuestions() {\n\t\t// fetch from api\n\t\tconst amount = options.amount\n\t\tconst difficulty = options.difficulty\n\t\tconst type = options.type\n\t\tconst category = options.category === 'all' ? '' : options.category\n\t\tconst url = `https://opentdb.com/api.php?amount=${amount}&difficulty=${difficulty}&type=${type}&category=${category}&token=${token}`\n\t\tconsole.log('fetch from', url)\n\n\t\tfetch(url)\n\t\t\t.then((response) => response.json())\n\t\t\t.then((data) => {\n\t\t\t\tdata.response_code === 3 ?? getToken()\n\t\t\t\tdata.response_code === 4 ?? getToken()\n\t\t\t\tdata.results.forEach((question) => {\n\t\t\t\t\tquestion.incorrect_answers.push(question.correct_answer)\n\t\t\t\t\tquestion.incorrect_answers = question.incorrect_answers.sort()\n\t\t\t\t})\n\t\t\t\tsetQuestions(data.results)\n\t\t\t})\n\t\t\t.catch((error) => console.log(error))\n\t}\n\n\tfunction handleOptionsChange(event) {\n\t\tsetOptions((prevOptions) => {\n\t\t\treturn {\n\t\t\t\t...prevOptions,\n\t\t\t\t[event.target.name]: event.target.value,\n\t\t\t}\n\t\t})\n\t}\n\tfunction toggleOptions() {\n\t\tsetOptions((prevOptions) => {\n\t\t\treturn {\n\t\t\t\t...prevOptions,\n\t\t\t\tvisible: !prevOptions.visible,\n\t\t\t}\n\t\t})\n\t}\n\n\tfunction toggleStartScreen() {\n\t\tsetStartScreen((prevStartScreen) => {\n\t\t\treturn !prevStartScreen\n\t\t})\n\t}\n\n\tfunction handleQuestionClick(questionId, answer) {\n\t\tif (!isChecked) {\n\t\t\tsetSelectedAnswers((prevState) => {\n\t\t\t\tconst newState = { ...prevState }\n\t\t\t\tnewState[questionId] = answer\n\t\t\t\treturn newState\n\t\t\t})\n\t\t}\n\t}\n\n\t// compare answers with correct answer\n\tfunction checkAnswers() {\n\t\tif (Object.getOwnPropertyNames(selectedAnswers).length === questions.length) {\n\t\t\tsetIsChecked(true)\n\t\t\tconst correctAnswers = questions.map((question) => question.correct_answer)\n\t\t\tlet count = 0\n\t\t\tObject.keys(selectedAnswers).map((key) => {\n\t\t\t\tif (selectedAnswers[key] === correctAnswers[key]) {\n\t\t\t\t\treturn count++\n\t\t\t\t}\n\t\t\t})\n\t\t\tsetScore((prevState) => {\n\t\t\t\tconst newState = { ...prevState }\n\t\t\t\tnewState[turn] = {\n\t\t\t\t\tturn: turn,\n\t\t\t\t\tcorrectsAnswers: count,\n\t\t\t\t\tquestions: questions.length,\n\t\t\t\t}\n\t\t\t\treturn newState\n\t\t\t})\n\t\t}\n\t}\n\n\tfunction restartGame() {\n\t\tsetTurn((prevTurn) => prevTurn + 1)\n\t\tsetIsChecked(false)\n\t\tsetSelectedAnswers([])\n\t\tgetQuestions()\n\t}\n\n\t// map questions to question components\n\t// console.log(questions)\n\n\t// take all scores from score object and add them in a total score const\n\tconst totalScore = Object.values(score).reduce((acc, curr) => {\n\t\treturn acc + curr.correctsAnswers\n\t}, 0)\n\tconst totalQuestions = Object.values(score).reduce((acc, curr) => {\n\t\treturn acc + curr.questions\n\t}, 0)\n\tconst totalTurns = Object.keys(score).length\n\n\treturn (\n\t\t<div className='App'>\n\t\t\t{startScreen && <Start options={options} toggleOptions={toggleOptions} toggleStartScreen={toggleStartScreen} getCategory={getCategory} />}\n\t\t\t{options.visible && (\n\t\t\t\t<Options options={options} toggleOptions={toggleOptions} handleOptionsChange={handleOptionsChange} getCategory={getCategory} categories={categories} />\n\t\t\t)}\n\t\t\t{!startScreen &&\n\t\t\t\tquestions.map((question) => (\n\t\t\t\t\t<Question\n\t\t\t\t\t\tclassName={options.visible ? 'hidden' : ''}\n\t\t\t\t\t\tkey={nanoid()}\n\t\t\t\t\t\tid={questions.indexOf(question)}\n\t\t\t\t\t\tquestion={question.question}\n\t\t\t\t\t\tcategory={question.category}\n\t\t\t\t\t\tcorrect_answer={question.correct_answer}\n\t\t\t\t\t\tincorrect_answers={question.incorrect_answers}\n\t\t\t\t\t\tanswers={question.answers}\n\t\t\t\t\t\thandleQuestionClick={handleQuestionClick}\n\t\t\t\t\t\tselectedAnswer={selectedAnswers[questions.indexOf(question)]}\n\t\t\t\t\t\tisChecked={isChecked}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t{/* {!startScreen && Object.getOwnPropertyNames(selectedAnswers).length !== questions.length && <button className='check'>Check answers</button>} */}\n\t\t\t{!startScreen && (\n\t\t\t\t<button type='submit' className={options.visible ? 'check hidden' : 'check'} onClick={isChecked ? restartGame : checkAnswers}>\n\t\t\t\t\t{isChecked ? 'Restart' : 'Check answers'}\n\t\t\t\t</button>\n\t\t\t)}\n\t\t\t{/* \n\t\t\t\t<button className={options.visible ? 'check hidden' : 'check'} onClick={isChecked ? restartGame : checkAnswers}>\n\t\t\t\t\t{isChecked ? 'Restart' : 'Check answers'}\n\t\t\t\t</button> */}\n\t\t\t{!startScreen && (\n\t\t\t\t<Results\n\t\t\t\t\toptions={options}\n\t\t\t\t\ttoggleOptions={toggleOptions}\n\t\t\t\t\tgetCategory={getCategory}\n\t\t\t\t\tscore={totalScore}\n\t\t\t\t\ttotalQuestions={totalQuestions}\n\t\t\t\t\ttotalTurns={totalTurns}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n"]},"metadata":{},"sourceType":"module"}